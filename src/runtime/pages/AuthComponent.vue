<template>
  <div>
    <h1>
      Page qui set dans le localstorage le token en le r√©cuperant dans l'url
    </h1>
  </div>
</template>

<script lang="ts" setup>
import { navigateTo, useRoute } from "nuxt/app";
import { useAuth } from "../composables/useAuth";

const route = useRoute();

const token = route.query.token as string;

const auth = useAuth();

if (process.client) {
  localStorage.setItem(auth.localStorageKey, token);
}

auth.check();

navigateTo("/");
</script>
